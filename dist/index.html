<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><style>body,html{width:100%;height:100%;overflow:hidden;margin:0;padding:0}canvas{width:100%;height:100%;touch-action:none}</style><script src="https://cdn.babylonjs.com/babylon.js"></script><script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script><script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script><script src="https://code.jquery.com/pep/0.4.3/pep.js"></script><script src="e015ddbacc70fb9e5fe9.js"></script><script defer="defer" src="bundle.31d6cfe0d16ae931b73c.js"></script></head><body><canvas id="renderCanvas"></canvas><script>const models=[];let pickedMesh=null;const canvas=document.querySelector("#renderCanvas"),engine=new BABYLON.Engine(canvas,!0,{stencil:!0}),{scene:scene,camera:camera}=createScene(),light=new BABYLON.HemisphericLight(new BABYLON.Vector3(0,1,0));loadModel(),initGUI();const hl=new BABYLON.HighlightLayer("hl1",scene);function createScene(){const e=new BABYLON.Scene(engine);var n=new BABYLON.ArcRotateCamera("Camera",Math.PI/2,Math.PI/2,2e3,new BABYLON.Vector3(0,400,0));return n.attachControl(canvas,!1),n.useAutoRotationBehavior=!0,e.onPointerObservable.add(e=>{switch(e.type){case BABYLON.PointerEventTypes.POINTERDOWN:}}),{scene:e,camera:n}}function loadModel(){BABYLON.SceneLoader.ImportMeshAsync("","/resources/models/sazabi_ver.ka/","scene.gltf").then(e=>{models.push(e);e.meshes.filter(e=>e.material).forEach(e=>{e.isPickable=!0,setMeshActions(e)})})}function setMeshActions(e){e.actionManager=new BABYLON.ActionManager(scene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOverTrigger},(function(e){const n=scene.pick(scene.pointerX,scene.pointerY);hl.removeAllMeshes(),hl.addMesh(n.pickedMesh,BABYLON.Color3.Green())}))),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPickTrigger},(function(e){const n=scene.pick(scene.pointerX,scene.pointerY);console.log(n.pickedMesh),pickedMesh=n.pickedMesh,picker.text=pickedMesh.name,picker.value=pickedMesh.material.albedoColor,hl.removeAllMeshes()})))}function initGUI(){var e=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),n=new BABYLON.GUI.StackPanel;n.width="200px",n.isVertical=!0,n.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,n.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,e.addControl(n);var o=new BABYLON.GUI.TextBlock;o.text="Diffuse color:",o.height="30px",n.addControl(o),window.picker=new BABYLON.GUI.ColorPicker,picker.height="150px",picker.width="150px",picker.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,picker.onValueChangedObservable.add((function(e){pickedMesh&&pickedMesh.material.albedoColor.copyFrom(e)})),n.addControl(picker);var r=new BABYLON.GUI.SelectionPanel("sp");r.color="white",r.width=.25,r.height=.48,r.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,r.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.addControl(r);var a=new BABYLON.GUI.CheckboxGroup("颜色模式");a.addCheckbox("emmisive",changeColorMode),r.addGroup(a);var i=new BABYLON.GUI.RadioGroup("材质");i.addRadio("Blue",changeMaterial,!0),i.addRadio("Red",changeMaterial),r.addGroup(i)}function createMaterial(){var e=new BABYLON.StandardMaterial("myMaterial",scene);return e.diffuseColor=new BABYLON.Color3(1,0,1),e.albedoColor=new BABYLON.Color3(.5,.6,.87),e.ambientColor=new BABYLON.Color3(.23,.98,.53),e}function changeColorMode(){}function changeMaterial(){if(models.length){var e=new BABYLON.PBRMetallicRoughnessMaterial("pbr",scene);e.baseColor=pickedMesh.material.albedoColor,e.albedoColor=pickedMesh.material.albedoColor,e.metallic=1,e.roughness=0,pickedMesh.material=e}}engine.runRenderLoop((function(){scene.render()})),window.addEventListener("resize",(function(){engine.resize()}))</script></body></html>